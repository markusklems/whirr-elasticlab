#!/bin/bash
echo "launch 3nodes: $(date +%s)" >> scalability_experiment.log
whirr launch-cluster --config=experiments/3nodes
echo "finished launch 3nodes: $(date +%s)" >> scalability_experiment.log
whirr run-experiment --config=experiments/3nodes --ycsb-experiment-action=prepare --ycsb-workload-file=scale/workloada-03nodes
echo "load 3nodes: $(date +%s)" >> scalability_experiment.log
whirr run-experiment --config=experiments/3nodes --ycsb-experiment-action=run --ycsb-workload-phase=load --ycsb-workload-file=scale/workloada-03nodes
whirr run-experiment --config=experiments/3nodes --ycsb-experiment-action=upload --ycsb-workload-phase=load
echo "run 3nodes: $(date +%s)" >> scalability_experiment.log
whirr run-experiment --config=experiments/3nodes --ycsb-experiment-action=run --ycsb-workload-phase=transaction --ycsb-workload-file=scale/workloada-03nodes
whirr run-experiment --config=experiments/3nodes --ycsb-experiment-action=upload --ycsb-workload-phase=transaction
echo "finished experiment 3nodes: $(date +%s)" >> scalability_experiment.log
echo "repair 3nodes to 4nodes: $(date +%s)" >> scalability_experiment.log
whirr repair-cluster --config=experiments/4nodes
echo "finished repair 3nodes to 4nodes: $(date +%s)" >> scalability_experiment.log
whirr run-experiment --config=experiments/4nodes --ycsb-experiment-action=prepare --ycsb-workload-file=scale/workloada-04nodes
echo "load 4nodes: $(date +%s)" >> scalability_experiment.log
whirr run-experiment --config=experiments/4nodes --ycsb-experiment-action=run --ycsb-workload-phase=load --ycsb-workload-file=scale/workloada-04nodes
whirr run-experiment --config=experiments/4nodes --ycsb-experiment-action=upload --ycsb-workload-phase=load
echo "run 4nodes: $(date +%s)" >> scalability_experiment.log
whirr run-experiment --config=experiments/4nodes --ycsb-experiment-action=run --ycsb-workload-phase=transaction --ycsb-workload-file=scale/workloada-04nodes
whirr run-experiment --config=experiments/4nodes --ycsb-experiment-action=upload --ycsb-workload-phase=transaction
echo "finished experiment 4nodes: $(date +%s)" >> scalability_experiment.log
#whirr destroy-cluster --config=experiments/4nodes
